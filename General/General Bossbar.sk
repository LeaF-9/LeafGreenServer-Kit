options:
	prefix: <##00bfff>[<##00fa9a>Timer<##00bfff>]

command /bbt <text> <text>:
	permission: sk.admin
	trigger:
		if arg 1 is "start":
			if {BossBarTimer::%arg 2%} is not set:
				if arg 2 contains "Kit":
					create bossbar titled "&a&lKit PvP &d&l10:00" and id "%arg 2%" for all players with progress 100 with colors green with style segmented 10
					set {_time} to 600
					set {BossBarTimer::%arg 2%} to true
					set {_prog} to 6
					loop {_time} times:
						if {BossBarTimer::%arg 2%} is true:
							wait a second
							subtract 1 from {_time}
							set {_timecalc} to {_time}
							if {_time} <= 10:
								if {_time} is not 0:
									loop all players:
										{Join::%loop-player%} is "Kit"
										message "{@prefix} §b%{_time}%§d..." to loop-player
										play sound "block.note_block.pling" with volume 1 with pitch 1 to loop-player
							set {_minute} to 0
							set {_second} to 0
							while {_timecalc} >= 60:
								if {_timecalc} >= 60:
									add 1 to {_minute}
									subtract 60 from {_timecalc}
							set {_second} to {_timecalc}
							if {_minute} < 10:
								set {_minute} to "0%{_minute}%"
							if {_second} < 10:
								set {_second} to "0%{_second}%"
							set bossbar "%arg 2%" title to "&a&lKit PvP &d&l%{_minute}%&d&l:%{_second}%"
							subtract 1 from {_prog}
							if {_prog} is 0:
								set {_prog} to 6
								set {_value} to value of bossbar "%arg 2%"
								subtract 1 from {_value}
								set bossbar "%arg 2%" value to {_value}
					remove bossbar "%arg 2%"
					if {BossBarTimer::%arg 2%} is true:
						execute console command "/timer end %arg 2%"
				else if arg 2 is "Murder":
					create bossbar titled "&4&lMurder &d&l05:00" and id "%arg 2%" for all players with progress 100 with colors red with style segmented 10
					set {_time} to 300
					set {BossBarTimer::%arg 2%} to true
					set {_prog} to 3
					loop {_time} times:
						if {BossBarTimer::%arg 2%} is true:
							wait a second
							subtract 1 from {_time}
							set {_timecalc} to {_time}
							if {_time} <= 5:
								if {_time} is not 0:
									loop all players:
										{Join::%loop-player%} is "Murder"
										message "{@prefix} §b%{_time}%§d..." to loop-player
										play sound "block.note_block.pling" with volume 1 with pitch 1 to loop-player
							set {_minute} to 0
							set {_second} to 0
							while {_timecalc} >= 60:
								if {_timecalc} >= 60:
									add 1 to {_minute}
									subtract 60 from {_timecalc}
							set {_second} to {_timecalc}
							if {_minute} < 10:
								set {_minute} to "0%{_minute}%"
							if {_second} < 10:
								set {_second} to "0%{_second}%"
							set bossbar "%arg 2%" title to "&4&lMurder &d&l%{_minute}%&d&l:%{_second}%"
							subtract 1 from {_prog}
							if {_prog} is 0:
								set {_prog} to 3
								set {_value} to value of bossbar "%arg 2%"
								subtract 1 from {_value}
								set bossbar "%arg 2%" value to {_value}
					remove bossbar "%arg 2%"
					if {BossBarTimer::%arg 2%} is true:
						execute console command "/timer end %arg 2%"
				else if arg 2 is "Tag":
					create bossbar titled "&9&lTag &d&l05:00" and id "%arg 2%" for all players with progress 100 with colors blue with style segmented 10
					set {_time} to 300
					set {BossBarTimer::%arg 2%} to true
					set {_prog} to 3
					loop {_time} times:
						if {BossBarTimer::%arg 2%} is true:
							wait a second
							subtract 1 from {_time}
							set {_timecalc} to {_time}
							if {_time} <= 10:
								if {_time} is not 0:
									loop all players:
										{Join::%loop-player%} is "Tag"
										message "{@prefix} §b%{_time}%§d..." to loop-player
										play sound "block.note_block.pling" with volume 1 with pitch 1 to loop-player
							set {_minute} to 0
							set {_second} to 0
							while {_timecalc} >= 60:
								if {_timecalc} >= 60:
									add 1 to {_minute}
									subtract 60 from {_timecalc}
							set {_second} to {_timecalc}
							if {_minute} < 10:
								set {_minute} to "0%{_minute}%"
							if {_second} < 10:
								set {_second} to "0%{_second}%"
							set bossbar "%arg 2%" title to "&9&lTag &d&l%{_minute}%&d&l:%{_second}%"
							subtract 1 from {_prog}
							if {_prog} is 0:
								set {_prog} to 3
								set {_value} to value of bossbar "%arg 2%"
								subtract 1 from {_value}
								set bossbar "%arg 2%" value to {_value}
					remove bossbar "%arg 2%"
					if {BossBarTimer::%arg 2%} is true:
						execute console command "/timer end %arg 2%"
				else if arg 2 is "Smash":
					if {Smash-Options::time} is true:
						create bossbar titled "&2&lSmash Mobs &d&l10:00" and id "%arg 2%" for all players with progress 100 with colors green with style segmented 10
						set {_time} to 600
						set {_basetime} to 600
					else:
						create bossbar titled "&2&lSmash Mobs &d&l60:00" and id "%arg 2%" for all players with progress 100 with colors green with style segmented 10
						set {_time} to 3600
						set {_basetime} to 3600
					set {BossBarTimer::%arg 2%} to true
					loop {_time} times:
						if {BossBarTimer::%arg 2%} is true:
							wait a second
							subtract 1 from {_time}
							set {_timecalc} to {_time}
							if {_time} <= 5:
								if {_time} is not 0:
									loop all players:
										{Join::%loop-player%} is "Smash"
										message "{@prefix} §b%{_time}%§d..." to loop-player
										play sound "block.note_block.pling" with volume 1 with pitch 1 to loop-player
							set {_minute} to 0
							set {_second} to 0
							while {_timecalc} >= 60:
								if {_timecalc} >= 60:
									add 1 to {_minute}
									subtract 60 from {_timecalc}
							set {_second} to {_timecalc}
							if {_minute} < 10:
								set {_minute} to "0%{_minute}%"
							if {_second} < 10:
								set {_second} to "0%{_second}%"
							set bossbar "%arg 2%" title to "&2&lSmash Mobs &d&l%{_minute}%&d&l:%{_second}%"
							set {_prog} to {_time} / {_basetime} * 100
							set bossbar "%arg 2%" value to {_prog}
					remove bossbar "%arg 2%"
					if {BossBarTimer::%arg 2%} is true:
						execute console command "/timer end %arg 2%"
				else:
					message "§cそのタイマーは存在しません" to player
			else:
				message "§cそのタイマーは実行中です!" to player
		else if arg 1 is "stop":
			if {BossBarTimer::%arg 2%} is true:
				delete {BossBarTimer::%arg 2%}
				message "§7タイマーを停止しました" to player
			else:
				message "§cそのタイマーは開始されていません!" to player